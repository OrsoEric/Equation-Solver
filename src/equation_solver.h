/**********************************************************************************
**  ENVIROMENT VARIABILE
**********************************************************************************/

#ifndef EQUATION_SOLVER_H_
    #define EQUATION_SOLVER_H_

/**********************************************************************************
**  GLOBAL INCLUDES
**********************************************************************************/

#include <vector>

#include "tree.hpp"
#include "equation.h"

/**********************************************************************************
**  DEFINES
**********************************************************************************/

/**********************************************************************************
**  MACROS
**********************************************************************************/

/**********************************************************************************
**  NAMESPACE
**********************************************************************************/

//! @namespace custom namespace
namespace User
{

/**********************************************************************************
**  TYPEDEFS
**********************************************************************************/

/**********************************************************************************
**  PROTOTYPE: STRUCTURES
**********************************************************************************/

/**********************************************************************************
**  PROTOTYPE: GLOBAL VARIABILES
**********************************************************************************/

/**********************************************************************************
**  PROTOTYPE: CLASS
**********************************************************************************/

/************************************************************************************/
//! @class      Equation
/************************************************************************************/
//!	@author     Orso Eric
//! @version    2022-06-DD
//! @brief      xxx
//! @copyright  BSD 3-Clause License Copyright (c) 2020, Orso Eric
//! @details
//! \n This class translates an equation in string form into an equation in tree form
//! \n 2022-08-09 Implements Unary +/- Operators
//! \n 2022-08-09 Functions work out of the box. It's a symbol with leaves. It's parsed correctly.
/************************************************************************************/

class Equation_solver
{
    //Visible to all
    public:
        /*********************************************************************************************************************************************************
        **********************************************************************************************************************************************************
        **  CONSTRUCTORS
        **********************************************************************************************************************************************************
        *********************************************************************************************************************************************************/

        //Empty constructor
		Equation_solver( void );

		/*********************************************************************************************************************************************************
        **********************************************************************************************************************************************************
        **  SETTERS
        **********************************************************************************************************************************************************
        *********************************************************************************************************************************************************/

        //Load and parse an equation into a tree of tokens
        bool load( const char *ips8 );

		/*********************************************************************************************************************************************************
        **********************************************************************************************************************************************************
        **  METHODS
        **********************************************************************************************************************************************************
        *********************************************************************************************************************************************************/

        //Preprocess a tree to do trivial aggregations and slimplifications
        bool preprocess_tree( void );

	//Visible to derived classes
	protected:

	//Visible only inside the class
	private:

		/*********************************************************************************************************************************************************
        **********************************************************************************************************************************************************
        **  METHODS
        **********************************************************************************************************************************************************
        *********************************************************************************************************************************************************/

        //List of the dependent and independent variables of the system of equation
        std::vector<std::string> gas_inputs;
        std::vector<std::string> gas_outputs;
		//System of equations
		std::vector<User::Equation> gacl_system_of_equation;
		//Equations that are the solution
		std::vector<User::Equation> gacl_solution;
};	//End Class: Equation

/**********************************************************************************
**  NAMESPACE
**********************************************************************************/

}	//end namespace

#else
    #warning "Multiple inclusion of hader file EQUATION_PARSER_H_"
#endif
